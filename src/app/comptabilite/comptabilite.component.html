<div id="page-wrapper">
    <div class="row" >
        <div class="col-sm-12">
            <h1 class="page-header">Comptabilité</h1> 
               
	            <ul class="nav nav-pills">
                    
	                <li class="active"><a href="#caisse" data-toggle="tab">Caisse</a>
	                </li>
	                <li><a href="#journal" data-toggle="tab">Journal</a></li>
	               
	                <li><a href="#exploitations" data-toggle="tab">Exploitation</a></li>
	           
	                <li><a href="#personnalisation" data-toggle="tab">Personnalisation</a></li>
	               
	            </ul>
               
            <div class="tab-content">

			    <div class="tab-pane fade in active" id="caisse" >
                    <div class="row blockcaisse" *ngFor="let pdv of pdvCaisses; let i = index; let isOdd = odd" [ngClass]="{'colored-caisse' : !isOdd}">
                        <div class="col-sm-3 col-xs-12">
                                <label>{{pdv.nom}}</label>
                        </div>
                        <div class="col-sm-3 col-xs-12">
                                <label>Fond de caisse : {{pdv.caisse}}</label>
                        </div>
                        <div class="col-sm-3 col-xs-12" *ngIf="!isActif(pdv.nom)">
                                <button class="btn btn-success" (click)="approvisionnement=approvisionnement+'-'+pdv.nom+'-'">Approvisionner</button>
                        </div>
                        <div class="col-sm-3 col-xs-12" *ngIf="isActif(pdv.nom)">
                                <input type="number" [(ngModel)]="montantajoutecaisse"   name="caiss" class="form-control"  placeholder="Montant Approvisionnement" required>
                        </div>
                        <div class="col-sm-3 col-xs-12" *ngIf="isActif(pdv.nom)">
                                <button class="btn btn-success" (click)="approvisionnercaisse(pdv.id)">Valider</button>
                        </div>
                    </div>
			    </div>	


			    <div class="row tab-pane fade in" id="journal" >
			       
		            <div class="row blockcaisse" *ngFor="let pdv of pdvCaisses; let i = index; let isOdd = odd" [ngClass]="{'colored-caisse' : !isOdd}" >

				        <div class="col-sm-3 col-xs-4">
			                <button style="background-color: transparent; border : none ;"  href="#vide" data-toggle="tab"> <label>{{pdv.nom}} </label> </button>
				        </div>
				        <div class="col-sm-3 col-xs-12">
	                         <button style="margin-bottom: 1rem;" class="btn btn-success"  href="#listc" data-toggle="tab"  (click)="listercharges(i)">Lister Charges</button>
				        </div>
				        <div class="col-sm-3 col-xs-8">
			                 <button style="margin-bottom: 1rem;" class="btn btn-success"  href="#ajout" data-toggle="tab"  (click)="ajoutercharges(i)">
			                 Ajouter Charge
			                 </button>
				        </div>
				         <div class="col-sm-3 col-xs-12">
	                         <button style="margin-bottom: 1rem;" class="btn btn-success"  href="#listr" data-toggle="tab"  (click)="listerrevenus(i)">Lister Revenus</button>
				        </div>

	                    <div class="col-sm-12 col-xs-12 tab-content" *ngIf="i==estselectionne">
                                    
                        <div id="vide">
                        </div>

                            <div id="listc"  class="tab-pane fade in" >    
                            <div class="panel-body">
                            <div class="dataTables_wrapper form-inline dt-bootstrap no-footer" id="dataTables-example_wrapper">
                            	<div class="row">
                            		<div class="col-sm-12">
                            			
	                	  <table width="100%" class="table table-responsive table-bordered table-striped" [mfData]="charges|filtrecharges:filtre" #fopad="mfDataTable" [mfRowsOnPage]="10" [(mfSortBy)]="nom" [(mfSortOrder)]="asc" style="width: 100%;">
                                <thead>
                                    <tr>
                                        <th colspan="3" style="padding-right: 3rem ;">
                                            Rechercher :
                                            <input class="form-control" [(ngModel)]="filtre"/>
                                        </th>
		                            </tr>
                                    <tr>
                                        <th><mfDefaultSorter by="date">Date</mfDefaultSorter></th>
                                        <th><mfDefaultSorter by="libelle">Libellé</mfDefaultSorter></th>
                                        <th><mfDefaultSorter by="montant">Montant</mfDefaultSorter></th>
                                        <th><mfDefaultSorter by="service">Service</mfDefaultSorter></th>
                                   </tr>
                            
                                </thead>
                                <tbody *ngIf="this.charges">
                                <tr *ngFor="let charges of fopad.data">
                                    <td>{{charges.dateAjout.date | date}}</td>
                                    <td>{{charges.libelle}}</td>
                                    <td>{{charges.montant}}</td>
                                    <td>{{charges.service}}</td>
                                </tr>
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td colspan="4">
                                            <mfBootstrapPaginator ></mfBootstrapPaginator>
                                        </td>
                                    </tr>
                                </tfoot>

                            </table>
			                        </div>
			                    </div>
			                </div>
                        </div>
                        </div>
                                    
                         <div id="ajout" class="tab-pane fade in">
                                <form class="form-signin" (ngSubmit)="ajouterCharge()" #chargeForm="ngForm">
                                    <input type="text" [(ngModel)]="libelleCharge"   name="libelle" id="libelle" class="form-control"  placeholder="Libelle charge" required>
                                    <input type="number" [(ngModel)]="montantCharge"   name="montant" id="montant" class="form-control" placeholder="Montant de la dépense" required>
                                    <input type="number" [(ngModel)]="service"   name="service" id="montant" class="form-control" placeholder="Service concerné" required>

                                    <button id="validcharge" class="btn btn-primary btn-block" type="submit" [disabled]="!chargeForm.form.valid" >Enregister</button>
                                </form>
                        </div>
                                    
                        <div id="listr" class="tab-pane fade in" >
                                        
                                           <div class="panel-body">
                            <div class="dataTables_wrapper form-inline dt-bootstrap no-footer" id="dataTables-example_wrapper">
                            	<div class="row">
                            		<div class="col-sm-12">
                            			
	                	  <table width="100%" class="table table-responsive table-bordered table-striped" [mfData]="revenus|filtrerevenus:filtre" #fopa="mfDataTable" [mfRowsOnPage]="10" [(mfSortBy)]="nom" [(mfSortOrder)]="asc" style="width: 100%;">
                                <thead>
                                    <tr>
                                        <th colspan="3" style="padding-right: 3rem ;">
                                            Rechercher :
                                            <input class="form-control" [(ngModel)]="filtre"/>
                                        </th>
		                            </tr>
                                    <tr>
                                        <th><mfDefaultSorter by="date">Date</mfDefaultSorter></th>
                                        <th><mfDefaultSorter by="libelle">Libellé</mfDefaultSorter></th>
                                        <th><mfDefaultSorter by="montant">Montant</mfDefaultSorter></th>
                                        <th><mfDefaultSorter by="service">Service</mfDefaultSorter></th>
                                   </tr>
                            
                                </thead>
                                <tbody *ngIf="this.revenus">
                                <tr *ngFor="let revenus of fopa.data">
                                    <td>{{revenus.date.date | date}}</td>
                                    <td>{{revenus.libelle}}</td>
                                    <td>{{revenus.montant}}</td>
                                    <td>{{revenus.service}}</td>
                                </tr>
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td colspan="4">
                                            <mfBootstrapPaginator ></mfBootstrapPaginator>
                                        </td>
                                    </tr>
                                </tfoot>

                            </table>
			                        </div>
			                    </div>
			                </div>
                        </div>
                        </div>

                        </div>
                                    
                        </div>
				        
			    </div>	


			    <div class="row tab-pane fade in" id="exploitations">

			           <div class="row blockcaisse" *ngFor="let pdv of pdvCaisses; let i = index; let isOdd = odd" [ngClass]="{'colored-caisse' : !isOdd}" >

				        <div class="col-sm-3 col-xs-12">
			                <label>{{pdv.nom}}</label>
				        </div>
				        <div class="col-sm-3 col-xs-12">
				        <div class="col-sm-3 col-xs-12">
	                         <button class="btn btn-success"  href="#exp" data-toggle="collapse"  (click)="listerventes(i)">Consulter</button>
				        </div>
				      

	                    <div class="col-sm-12 col-xs-12" *ngIf="i==estselectionne">
                                    
                             <div id="exp" >
                                        
                                           <div class="panel-body">
                            <div class="dataTables_wrapper form-inline dt-bootstrap no-footer" id="dataTables-example_wrapper">
                            	<div class="row">
                            		<div class="col-sm-12">
                            			
	                	  <table width="100%" class="table table-responsive table-bordered table-striped" [mfData]="exploitation|filtreexploitation:filtre" #fopd="mfDataTable" [mfRowsOnPage]="10" [(mfSortBy)]="nom" [(mfSortOrder)]="asc" style="width: 100%;">
                                <thead>
                                    <tr>
                                        <th colspan="3" style="padding-right: 3rem ;">
                                            Rechercher :
                                            <input class="form-control" [(ngModel)]="filtre"/>
                                        </th>
		                            </tr>
                                    <tr>
                                        <th><mfDefaultSorter by="designation">Désignation</mfDefaultSorter></th>
                                        <th><mfDefaultSorter by="stocki">Stock Initial</mfDefaultSorter></th>
                                        <th><mfDefaultSorter by="vente">Ventes</mfDefaultSorter></th>
                                        <th><mfDefaultSorter by="stockf">Stock Final</mfDefaultSorter></th>
                                        <th><mfDefaultSorter by="mnt">Montant</mfDefaultSorter></th>
                                   </tr>
                            
                                </thead>
                                <tbody *ngIf="this.exploitation">
                                <tr *ngFor="let exploitation of fopd.data">
                                    <td>{{exploitation.designation}}</td>
                                    <td>{{exploitation.stocki}}</td>
                                    <td>{{exploitation.vente}}</td>
                                    <td>{{exploitation.stockf}}</td>
                                    <td>{{exploitation.mnt}}</td>
                                </tr>
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td colspan="4">
                                            <mfBootstrapPaginator ></mfBootstrapPaginator>
                                        </td>
                                    </tr>
                                </tfoot>

                            </table>
			                        </div>
			                    </div>
			                </div>
			                            <!-- /.table-responsive -->
                        </div>
                                    </div>
                                    
                        </div>
				   
			    </div>	
                </div>  
                </div>  

			    <div class="row tab-pane fade in" id="personnalisation">
			         <div class="row blockcaisse" *ngFor="let pdv of pdvCaisses; let i = index; let isOdd = odd" [ngClass]="{'colored-caisse' : !isOdd}" >

				        <div class="col-sm-3 col-xs-6">
                            <button style="background-color: transparent; border : none ;"  href="#vide" data-toggle="tab"> <label>{{pdv.nom}} </label> </button>
				        </div>
				        <div class="boutonspersonnalisation">
				        <div class="col-sm-3 col-xs-6">
	                         <button style="margin-bottom: 1rem;"  class="btn btn-success"  href="#ajoutservice" data-toggle="tab"  (click)="ajouterservice(i)">Ajouter Service</button>
				        </div>
				        <div class="col-sm-3 col-xs-6">
			                 <button style="margin-bottom: 1rem;" class="btn btn-success"  href="#modifservice" data-toggle="tab"  (click)="modifierservice(i)">
			                 Modifier Service
			                 </button>
				        </div>
				         <div class="col-sm-3 col-xs-6">
	                         <button  class="btn btn-success"  href="#supservice" data-toggle="tab"  (click)="supprimerservice(i)">Supprimer Service</button>
				        </div>
				        </div>

	                    <div class="col-sm-12 col-xs-12 tab-content" *ngIf="i==estselectionne">
                                    
                                    <div id="ajoutservice" class="tab-pane fade in" >
				                 		<form style="margin-bottom: 2rem;" class="form-signin" (ngSubmit)="ajouterservice()" #exploitationForm="ngForm">
				                 		<div class="row col-sm-3 col-xs-12" >
										    <input type="text" [(ngModel)]="service"   name="service" id="service" class="form-control"  placeholder="ajouter un service" required>
										
										    <input type="text" [(ngModel)]="designations"   name="designations" id="designations" class="form-control" placeholder="désignation du service" required>

                                            <input type="text" [(ngModel)]="adesignations" *ngIf="i==montreautredesignation"   name="adesignations" id="adesignations" class="form-control" placeholder="autre désignation du service" required>

										</div>
										<div class="col-sm-3 col-xs-12" >
										    
										
							                <button id="validservice" class="btn btn-primary btn-block" type="submit" [disabled]="!exploitationForm.form.valid" >Ajouter</button>

                                            <button id="autresdesignation" class="btn btn-primary btn-block" type="
                                            submit" [disabled]="!exploitationForm.form.valid" (click)="autredesignation(i)">Autre désignation</button>
							             </div>
								        </form>
				       				 </div>
                                    
                        </div>
                           <div id="modifservice" class="tab-pane fade in" *ngIf="i==estselectionms">
                           <div class="col-sm-6 col-xs-12" >
                                    
                                   

                          <table width="100%" class="table table-responsive table-bordered table-striped" [mfData]="supservice|filtresupservice:filtre" #foi="mfDataTable" [mfRowsOnPage]="10" [(mfSortBy)]="nom" [(mfSortOrder)]="asc" style="width: 100%;">
                                <thead>
                                    <tr>
                                        <th colspan="3" style="padding-right: 3rem ;">
                                            Rechercher :
                                            <input class="form-control" [(ngModel)]="filtre"/>
                                        </th>
		                            </tr>
                                    <tr>
                                        <th><mfDefaultSorter by="services">Services</mfDefaultSorter></th>
                                        <th><mfDefaultSorter by="design">Désignations</mfDefaultSorter></th>
                                        <th><mfDefaultSorter >Supprimer</mfDefaultSorter></th>
                                   </tr>
                            
                                </thead>
                                <tbody *ngIf="this.supservice">
                                <tr *ngFor="let supservice of foi.data; let j=index; ">
                                    <td>{{supservice.services}}</td>
                                    <td>{{supservice.design}}</td>
                                    <td>
                                    <button id="modifyservice" type="submit" (click)="modifyservice(j)">Modifier</button>
                                    </td>
                                </tr>
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td colspan="4">
                                            <mfBootstrapPaginator ></mfBootstrapPaginator>
                                        </td>
                                    </tr>
                                </tfoot>

                            </table>
                            </div>
                            <div *ngIf="estselectionmods!=-1" class="col-sm-6 col-xs-12" >

				                 		<form class="form-signin" (ngSubmit)="validermodifierservice()" #exploitationForm="ngForm">
										    <input name="services" type="text" [(ngModel)]="serviceamodifier().services" class="form-control"   required>
										    <input name="design" type="text" [(ngModel)]="serviceamodifier().design" class="form-control"  required>

							                <button id="validcharge" class="btn btn-primary btn-block" type="submit" [disabled]="!exploitationForm.form.valid" >Modifier</button>
								        </form>
				        	</div>
				        	
                        </div>
				        
				        <div class="col-sm-6 col-xs-12" >
				                 <div id="supservice" *ngIf="i==estselectionss">
				                 		<table width="100%" class="table table-responsive table-bordered table-striped" [mfData]="supservice|filtresupservice:filtre" #fo="mfDataTable" [mfRowsOnPage]="10" [(mfSortBy)]="nom" [(mfSortOrder)]="asc" style="width: 100%;">
                                <thead>
                                    <tr>
                                        <th colspan="3" style="padding-right: 3rem ;">
                                            Rechercher :
                                            <input class="form-control" [(ngModel)]="filtre"/>
                                        </th>
		                            </tr>
                                    <tr>
                                        <th><mfDefaultSorter by="services">Services</mfDefaultSorter></th>
                                        <th><mfDefaultSorter by="design">Désignations</mfDefaultSorter></th>
                                        <th><mfDefaultSorter >Supprimer</mfDefaultSorter></th>
                                   </tr>
                            
                                </thead>
                                <tbody *ngIf="this.supservice">
                                <tr *ngFor="let supservice of fo.data">
                                    <td>{{supservice.services}}</td>
                                    <td>{{supservice.design}}</td>
                                    <td>
                                    <button id="deleteservice" type="submit" (click)="deleteservice(supservice)">Supprimer</button>
                                    </td>
                                </tr>
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td colspan="4">
                                            <mfBootstrapPaginator ></mfBootstrapPaginator>
                                        </td>
                                    </tr>
                                </tfoot>

                            </table>
				       			 </div>

				    	</div>
		            
			    </div>

			    
	        </div>

	
        </div>
    </div>	
</div>


